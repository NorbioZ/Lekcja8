package com.company;
import java.util.InputMismatchException;
import java.util.Scanner;
public class MainBankException {
    private static final Scanner scanner = new Scanner(System.in);
    public static void main(String[] args) {
        System.out.println("Chcesz załozyć konto?");
        boolean doCreateAccount = tak_lub_nie();
        if (!doCreateAccount) {
            koniec();
        }
        Account konto = nowe_konto();
        System.out.println("Chcesz wypłacić pieniądze?");
        boolean wypłać = tak_lub_nie();

        if (!wypłać) {
            koniec();
        }
        System.out.println("Wpisz kwotę do wyplaty:");
        int kwota = kwota();
        try {
            konto.wypłać(kwota);
        } catch (InsufficientFundsException exception) {
            System.out.println(exception.getMessage());
            main(new String[0]);
        }
        System.out.printf("Twoj stan konta to: %.2f $", konto.stan_konta());
        System.out.println();
    }
    private static Account nowe_konto() {
        System.out.println("Podaj swoje imię:");
        String Imię = null;
        try {
            Imię = scanner.nextLine();
            if (Imię.isBlank())
                throw new InputMismatchException();
        } catch (InputMismatchException exception) {
            System.out.println("Błędne dane");
            main(new String[0]);
        }
        System.out.println("Ile pieniędzy chcesz wpłacić na konto?");
        int inicjał = kwota();
        return new Account(Imię, inicjał);
    }
    private static void koniec() {
        System.out.println("Dziekujemy za korzystanie z serwisu");
        System.exit(0);
    }
    private static int kwota() {
        int kwota = 0;
        try {
            kwota = Integer.parseInt(scanner.nextLine());
        } catch (NumberFormatException exception) {
            System.out.println("Nieprawidłowe dane");
            main(new String[0]);
        }
        return kwota;
    }
    private static boolean tak_lub_nie() {
        String Odpowiedź = null;
        try {
            Odpowiedź = scanner.nextLine();
        } catch (NumberFormatException exception) {
            System.out.println("Błędne dane!");
            main(new String[0]);
        }
        assert Odpowiedź != null;
        if (Odpowiedź.toLowerCase().contains("tak"))
            return true;
        else if (Odpowiedź.toLowerCase().contains("nie"))
            return false;
        else {
            System.out.println("Wpisz tak lub nie:");
            return tak_lub_nie();
        }
    }
}
